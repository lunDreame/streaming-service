"use strict";(self.webpackChunkstreaming_service=self.webpackChunkstreaming_service||[]).push([[998],{617:(e,r,n)=>{n.r(r),n.d(r,{default:()=>d});var a=n(483),s=n(376),t=n(559),o=n(454),l=n(723);const c=(0,a.memo)((e=>{let{streamUrl:r}=e;const n=(0,a.useRef)(null),s=(0,a.useRef)(null),[t,c]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{const e=n.current;if(!e||!r)return;return(()=>{if(s.current&&s.current.destroy(),o.Ay.isSupported()){const n=new o.Ay({debug:!1,enableWorker:!0,backBufferLength:30,maxBufferSize:0,maxBufferLength:30,liveSyncDurationCount:3,manifestLoadingTimeOut:2e4,manifestLoadingMaxRetry:6,levelLoadingTimeOut:2e4,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,xhrSetup:function(e,r){e.withCredentials=!0,e.setRequestHeader("Access-Control-Allow-Origin","*"),e.setRequestHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),e.setRequestHeader("Access-Control-Allow-Headers","Content-Type")}});n.loadSource(r),n.attachMedia(e),n.on(o.Ay.Events.MANIFEST_PARSED,(()=>{c(!1),e.play().catch((e=>{console.warn("Autoplay failed:",e)}))})),n.on(o.Ay.Events.ERROR,((e,r)=>{if(r.fatal)switch(r.type){case o.Ay.ErrorTypes.NETWORK_ERROR:console.log("Network error, attempting recovery..."),n.startLoad();break;case o.Ay.ErrorTypes.MEDIA_ERROR:console.log("Media error, attempting recovery..."),n.recoverMediaError();break;default:console.error("Fatal error:",r),c(!1)}})),s.current=n}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=r,e.addEventListener("loadedmetadata",(()=>{c(!1),e.play().catch((e=>{console.warn("Autoplay failed:",e)}))})))})(),()=>{const r=e,n=s.current;n&&(n.stopLoad(),n.detachMedia(),n.destroy(),s.current=null),r&&(r.removeAttribute("src"),r.load())}}),[r]),(0,l.jsxs)("div",{className:"video-player-container",children:[t&&(0,l.jsx)("div",{className:"loading-overlay",children:(0,l.jsx)("div",{className:"loading-spinner"})}),(0,l.jsx)("video",{ref:n,controls:!0,className:"video-player "+(t?"loading":""),playsInline:!0,autoPlay:!0,crossOrigin:"anonymous"})]})}));c.displayName="VideoPlayer";const i=c,d=()=>{const{subChannel:e}=(0,s.g)(),r=(0,s.Zp)(),{streams:n,channels:o,subChannels:c}=(0,t.n)(),d=(0,a.useMemo)((()=>{for(const r of o){const n=c[r];if(n)for(const r of["TV","Radio"]){const a=n[r];if(!a)continue;const s=a.find((r=>r.id===e));if(s)return s.name}}return e}),[o,c,e]),u=(0,a.useMemo)((()=>n[e]),[n,e]);return u?(0,l.jsxs)("div",{className:"video-container",children:[(0,l.jsxs)("h2",{children:[d," \ubc29\uc1a1 \ubcf4\uae30"]}),(0,l.jsx)(i,{streamUrl:u}),(0,l.jsx)("button",{onClick:()=>r("/"),className:"channel-button",style:{marginTop:"1rem"},children:"\ub2e4\ub978 \ucc44\ub110 \ubcf4\uae30"})]}):(0,l.jsxs)("div",{className:"error-message",children:[(0,l.jsx)("h2",{children:"\uc2a4\ud2b8\ub9bc\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,l.jsx)("button",{onClick:()=>r("/"),className:"channel-button",children:"\ud648\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})]})}}}]);
//# sourceMappingURL=998.d2925384.chunk.js.map