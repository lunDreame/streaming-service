"use strict";(self.webpackChunkstreaming_service=self.webpackChunkstreaming_service||[]).push([[998],{617:(e,r,a)=>{a.r(r),a.d(r,{default:()=>d});var n=a(483),t=a(376),s=a(559),o=a(454),l=a(723);const c=(0,n.memo)((e=>{let{streamUrl:r}=e;const a=(0,n.useRef)(null),t=(0,n.useRef)(null),[s,c]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{const e=a.current;if(!e||!r)return;return(()=>{if(t.current&&t.current.destroy(),o.Ay.isSupported()){const a=new o.Ay({debug:!1,enableWorker:!0,backBufferLength:30,maxBufferSize:0,maxBufferLength:30,liveSyncDurationCount:3,manifestLoadingTimeOut:2e4,manifestLoadingMaxRetry:6,levelLoadingTimeOut:2e4,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,xhrSetup:function(e,r){e.withCredentials=!1}});a.loadSource(r),a.attachMedia(e),a.on(o.Ay.Events.MANIFEST_PARSED,(()=>{c(!1),e.play().catch((e=>{console.warn("Autoplay failed:",e)}))})),a.on(o.Ay.Events.ERROR,((e,r)=>{if(r.fatal)switch(r.type){case o.Ay.ErrorTypes.NETWORK_ERROR:console.log("Network error, attempting recovery..."),a.startLoad();break;case o.Ay.ErrorTypes.MEDIA_ERROR:console.log("Media error, attempting recovery..."),a.recoverMediaError();break;default:console.error("Fatal error:",r),c(!1)}})),t.current=a}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=r,e.addEventListener("loadedmetadata",(()=>{c(!1),e.play().catch((e=>{console.warn("Autoplay failed:",e)}))})))})(),()=>{const r=e,a=t.current;a&&(a.stopLoad(),a.detachMedia(),a.destroy(),t.current=null),r&&(r.removeAttribute("src"),r.load())}}),[r]),(0,l.jsxs)("div",{className:"video-player-container",children:[s&&(0,l.jsx)("div",{className:"loading-overlay",children:(0,l.jsx)("div",{className:"loading-spinner"})}),(0,l.jsx)("video",{ref:a,controls:!0,className:"video-player "+(s?"loading":""),playsInline:!0,autoPlay:!0})]})}));c.displayName="VideoPlayer";const i=c,d=()=>{const{subChannel:e}=(0,t.g)(),r=(0,t.Zp)(),{streams:a,channels:o,subChannels:c}=(0,s.n)(),d=(0,n.useMemo)((()=>{for(const r of o){const a=c[r];if(a)for(const r of["TV","Radio"]){const n=a[r];if(!n)continue;const t=n.find((r=>r.id===e));if(t)return t.name}}return e}),[o,c,e]),u=(0,n.useMemo)((()=>a[e]),[a,e]);return u?(0,l.jsxs)("div",{className:"video-container",children:[(0,l.jsxs)("h2",{children:[d," \ubc29\uc1a1 \ubcf4\uae30"]}),(0,l.jsx)(i,{streamUrl:u}),(0,l.jsx)("button",{onClick:()=>r("/"),className:"channel-button",style:{marginTop:"1rem"},children:"\ub2e4\ub978 \ucc44\ub110 \ubcf4\uae30"})]}):(0,l.jsxs)("div",{className:"error-message",children:[(0,l.jsx)("h2",{children:"\uc2a4\ud2b8\ub9bc\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,l.jsx)("button",{onClick:()=>r("/"),className:"channel-button",children:"\ud648\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})]})}}}]);
//# sourceMappingURL=998.305884e1.chunk.js.map